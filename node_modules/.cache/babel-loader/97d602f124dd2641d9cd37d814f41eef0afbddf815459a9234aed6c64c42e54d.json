{"ast":null,"code":"import { createSlice, createAsyncThunk, isRejectedWithValue } from \"@reduxjs/toolkit\";\nimport axios from 'axios';\nconst BASE_API = 'https://fakestoreapi.com/products';\nexport const getProductsFromCategories = createAsyncThunk('category/fetchProductFromCategories', async category => {\n  try {\n    const {\n      data\n    } = await axios.get(category === 'all' ? BASE_API : BASE_API + `/category/${category}`);\n    return data;\n  } catch (e) {\n    console.log('error', e);\n    return isRejectedWithValue('Failed to fetch products');\n  }\n});\nvar Status = /*#__PURE__*/function (Status) {\n  Status[\"LOADING\"] = \"loading\";\n  Status[\"SUCCESS\"] = \"success\";\n  Status[\"ERROR\"] = \"error\";\n  return Status;\n}(Status || {});\nconst initialState = {\n  items: [],\n  searchItems: '',\n  status: Status.LOADING\n};\nconst productsSlice = createSlice({\n  name: 'items',\n  initialState,\n  reducers: {\n    setSearchWord: (state, action) => {\n      state.searchItems = action.payload;\n    },\n    getSearchProducts: (state, action) => {\n      state.items = state.items.filter(item => item.title.toLowerCase().includes(action.payload.toLowerCase()));\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(getProductsFromCategories.fulfilled, (state, action) => {\n      state.items = action.payload;\n      state.status = Status.SUCCESS;\n    }).addCase(getProductsFromCategories.rejected, (state, action) => {\n      state.status = Status.ERROR;\n    }).addCase(getProductsFromCategories.pending, (state, action) => {\n      state.status = Status.LOADING;\n    });\n  }\n});\nexport const {\n  getSearchProducts,\n  setSearchWord\n} = productsSlice.actions;\nexport default productsSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","isRejectedWithValue","axios","BASE_API","getProductsFromCategories","category","data","get","e","console","log","Status","initialState","items","searchItems","status","LOADING","productsSlice","name","reducers","setSearchWord","state","action","payload","getSearchProducts","filter","item","title","toLowerCase","includes","extraReducers","builder","addCase","fulfilled","SUCCESS","rejected","ERROR","pending","actions","reducer"],"sources":["/Users/meredova_o/Desktop/Frontcat/Урок 73. Продолжаем типизацию/project/src/redux/slices/productsSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk, isRejectedWithValue } from \"@reduxjs/toolkit\";\nimport axios, { AxiosResponse } from 'axios'\n\nconst BASE_API = 'https://fakestoreapi.com/products'\n\nexport const getProductsFromCategories = createAsyncThunk<TItems[], string >(\n    'category/fetchProductFromCategories',\n    async (category:string) => {\n        try {\n            const {data} = await axios.get<AxiosResponse<TItems[]>>(\n                category === 'all' ?\n                BASE_API \n                :\n                BASE_API + `/category/${category}`)\n            return data\n        }\n        catch(e) {\n            console.log('error', e)\n            return isRejectedWithValue('Failed to fetch products')\n        }\n    }\n)\n\nenum Status {\n    LOADING = 'loading',\n    SUCCESS = 'success',\n    ERROR = 'error',\n}\n\ntype TItems = {\n    id:number,\n    title:string,\n    price:string,\n    category:string,\n    descriprion:string,\n    image:string,\n}\n\ntype TInitialState = {\n    items:TItems[],\n    searchItems:string,\n    status:Status\n}\n\nconst initialState: TInitialState = {\n    items: [],\n    searchItems: '',\n    status:Status.LOADING\n}\n\nconst productsSlice = createSlice({\n    name: 'items',\n    initialState,\n    reducers: {\n        setSearchWord: (state, action) => {\n            state.searchItems = action.payload\n        },\n        getSearchProducts: (state, action) => {\n            state.items = state.items.filter(item => item.title.toLowerCase().includes(action.payload.toLowerCase()))\n        }\n    },\n    extraReducers: (builder) => {\n        builder\n        .addCase(getProductsFromCategories.fulfilled, (state, action) => {\n            state.items = action.payload\n            state.status = Status.SUCCESS\n        })\n        .addCase(getProductsFromCategories.rejected, (state, action) => {\n            state.status = Status.ERROR\n        })\n        .addCase(getProductsFromCategories.pending, (state, action) => {\n            state.status = Status.LOADING\n        })\n    }\n})\n\nexport const { getSearchProducts, setSearchWord } = productsSlice.actions\n\nexport default productsSlice.reducer"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,EAAEC,mBAAmB,QAAQ,kBAAkB;AACrF,OAAOC,KAAK,MAAyB,OAAO;AAE5C,MAAMC,QAAQ,GAAG,mCAAmC;AAEpD,OAAO,MAAMC,yBAAyB,GAAGJ,gBAAgB,CACrD,qCAAqC,EACrC,MAAOK,QAAe,IAAK;EACvB,IAAI;IACA,MAAM;MAACC;IAAI,CAAC,GAAG,MAAMJ,KAAK,CAACK,GAAG,CAC1BF,QAAQ,KAAK,KAAK,GAClBF,QAAQ,GAERA,QAAQ,GAAI,aAAYE,QAAS,EAAC,CAAC;IACvC,OAAOC,IAAI;EACf,CAAC,CACD,OAAME,CAAC,EAAE;IACLC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEF,CAAC,CAAC;IACvB,OAAOP,mBAAmB,CAAC,0BAA0B,CAAC;EAC1D;AACJ,CACJ,CAAC;AAAA,IAEIU,MAAM,0BAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAANA,MAAM;EAAA,OAANA,MAAM;AAAA,EAANA,MAAM;AAqBX,MAAMC,YAA2B,GAAG;EAChCC,KAAK,EAAE,EAAE;EACTC,WAAW,EAAE,EAAE;EACfC,MAAM,EAACJ,MAAM,CAACK;AAClB,CAAC;AAED,MAAMC,aAAa,GAAGlB,WAAW,CAAC;EAC9BmB,IAAI,EAAE,OAAO;EACbN,YAAY;EACZO,QAAQ,EAAE;IACNC,aAAa,EAAEA,CAACC,KAAK,EAAEC,MAAM,KAAK;MAC9BD,KAAK,CAACP,WAAW,GAAGQ,MAAM,CAACC,OAAO;IACtC,CAAC;IACDC,iBAAiB,EAAEA,CAACH,KAAK,EAAEC,MAAM,KAAK;MAClCD,KAAK,CAACR,KAAK,GAAGQ,KAAK,CAACR,KAAK,CAACY,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,KAAK,CAACC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACP,MAAM,CAACC,OAAO,CAACK,WAAW,CAAC,CAAC,CAAC,CAAC;IAC7G;EACJ,CAAC;EACDE,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CACNC,OAAO,CAAC5B,yBAAyB,CAAC6B,SAAS,EAAE,CAACZ,KAAK,EAAEC,MAAM,KAAK;MAC7DD,KAAK,CAACR,KAAK,GAAGS,MAAM,CAACC,OAAO;MAC5BF,KAAK,CAACN,MAAM,GAAGJ,MAAM,CAACuB,OAAO;IACjC,CAAC,CAAC,CACDF,OAAO,CAAC5B,yBAAyB,CAAC+B,QAAQ,EAAE,CAACd,KAAK,EAAEC,MAAM,KAAK;MAC5DD,KAAK,CAACN,MAAM,GAAGJ,MAAM,CAACyB,KAAK;IAC/B,CAAC,CAAC,CACDJ,OAAO,CAAC5B,yBAAyB,CAACiC,OAAO,EAAE,CAAChB,KAAK,EAAEC,MAAM,KAAK;MAC3DD,KAAK,CAACN,MAAM,GAAGJ,MAAM,CAACK,OAAO;IACjC,CAAC,CAAC;EACN;AACJ,CAAC,CAAC;AAEF,OAAO,MAAM;EAAEQ,iBAAiB;EAAEJ;AAAc,CAAC,GAAGH,aAAa,CAACqB,OAAO;AAEzE,eAAerB,aAAa,CAACsB,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}